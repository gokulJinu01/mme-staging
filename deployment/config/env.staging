# MME Staging Environment Configuration
# Copy this to deployment/.env and update with your actual values

# =============================================================================
# HOST CONFIGURATION
# =============================================================================
# Static IP from GCP
STATIC_IP=34.58.167.157

# Hosts (using nip.io for staging)
TRAEFIK_HOST_MME=mme.34.58.167.157.nip.io
TRAEFIK_HOST_TAGMAKER=tagmaker.34.58.167.157.nip.io
TRAEFIK_HOST_AUTH=auth.34.58.167.157.nip.io
TRAEFIK_HOST_TRAEFIK=traefik.34.58.167.157.nip.io
TRAEFIK_HOST_GRAFANA=grafana.34.58.167.157.nip.io
TRAEFIK_HOST_PROMETHEUS=prometheus.34.58.167.157.nip.io
TRAEFIK_HOST_ALERTMANAGER=alertmanager.34.58.167.157.nip.io
TRAEFIK_HOST_DOCS=docs.34.58.167.157.nip.io

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# JWT Configuration
JWT_SECRET=mme_jwt_secret_key_2024_staging_secure_random_64_bytes

# CORS Configuration
CORS_ALLOWED_ORIGINS=*

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB Configuration
MONGODB_ROOT_PASSWORD=mme_mongodb_staging_password_2024_secure_32_chars
MONGODB_URI=mongodb://admin:${MONGODB_ROOT_PASSWORD}@mongodb:27017/mme?authSource=admin&maxPoolSize=100&minPoolSize=10&maxIdleTimeMS=300000

# Redis Configuration
REDIS_PASSWORD=mme_redis_staging_password_2024_secure_32_chars

# =============================================================================
# MME CORE CONFIGURATION (Mode C - Production Ready)
# =============================================================================
# Environment
ENV=staging
ENABLE_DEBUG=false

# MME Bounded Parameters
MME_MAX_EDGES_PER_TAG=32
MME_MAX_DEPTH=2
MME_BEAM_WIDTH=128
MME_MAX_SEED_TAGS=5
MME_DECAY_ALPHA=0.8
MME_MIN_ACTIVATION=0.05
MME_TOKEN_BUDGET=2048
MME_DIVERSITY_LAMBDA=0.15
MME_RECENCY_TAU_DAYS=60
MME_RECENCY_WINDOW_HOURS=720
MME_CACHE_TTL_SECS=300

# MME Scoring Parameters
MME_BETA_ACTIVATION=1.0
MME_BETA_RECENCY=0.5
MME_BETA_IMPORTANCE=0.25
MME_BETA_STATUS=0.25
MME_STATUS_BONUS_COMPLETED=1.0
MME_STATUS_BONUS_SUBMITTED=0.5
MME_STATUS_BONUS_DRAFT=0.0

# =============================================================================
# PACKER CONFIGURATION
# =============================================================================
# Tokenizer Configuration
MME_PACKER_TOKENIZER_MODE=tiktoken
MME_PACKER_TOKENIZER_MODEL=gpt-3.5-turbo

# Diversity Configuration
MME_PACKER_DIVERSITY_MODE=soft
MME_PACKER_DIVERSITY_LAMBDA=0.15
MME_PACKER_JACCARD_HARD_CUT=0.95
MME_PACKER_EPSILON_SUM=0.05

# Selection Configuration
MME_PACKER_SELECTION_MODE=hybrid
MME_PACKER_DENSITY_SWITCH_TOKENS=512
MME_PACKER_MAX_EDGES_PER_TAG=32
MME_PACKER_TOKEN_BUDGET=2048

# =============================================================================
# VECTOR SIMILARITY & UNION CONFIGURATION (Mode C)
# =============================================================================
# Vector Similarity Configuration
MME_VECSIM_ENABLED=true
MME_BETA_VECTOR_SIMILARITY=0.20
MME_VECTOR_SIMILARITY_THRESHOLD=0.3
MME_MAX_VECTOR_RESULTS=200

# Union Configuration
MME_UNION_ENABLED=true
MME_UNION_TOP_M=50

# =============================================================================
# RESILIENCE & DEGRADATION
# =============================================================================
# Graceful degradation parameters
ALLOW_NEIGHBORS=true
PROMOTE_TOPK=10
MME_DEGRADATION_MODE=false

# =============================================================================
# TAGMAKER SERVICE CONFIGURATION
# =============================================================================
# OpenAI Configuration (Required - Update with your key)
OPENAI_API_KEY=sk-demo-key-for-staging-only-update-with-real-key

# Edge Learning Parameters
MME_LEARN_ETA=0.05
MME_LEARN_R=0.03
MME_LEARN_D=0.01
MME_LEARN_WMAX=1.0
MME_LEARN_WINDOW_HOURS=24

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Grafana Configuration
GRAFANA_PASSWORD=admin

# Prometheus Configuration
PROMETHEUS_RETENTION_TIME=200h

# =============================================================================
# SERVICE INTEGRATION
# =============================================================================
# Service URLs
MME_TAGMAKER_SERVICE_URL=http://mme-tagmaker-service:8000
MME_TAGGING_SERVICE_URL=http://mme-tagging-service:8080

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
# Log Levels
MME_LOG_LEVEL=info
LOG_LEVEL=INFO
GO_ENV=production
PYTHON_ENV=production

# =============================================================================
# PORTS & NETWORKING
# =============================================================================
# Service Ports
PORT=8080
JWT_PORT=3000
TAGMAKER_PORT=8000

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Service Enablement
ENABLE_TAGGING_SERVICE=true
ENABLE_DEBUG=false

# =============================================================================
# SECURITY HARDENING
# =============================================================================
# Security Options (applied in docker-compose.staging.yml)
# - no-new-privileges:true
# - read_only: true (where applicable)
# - user: non-root users
# - tmpfs: for temporary files
